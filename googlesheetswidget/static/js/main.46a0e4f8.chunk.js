(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},269:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(8),i=n.n(s),l=(n(103),n(9)),c=n(10),r=n(13),u=n(11),h=n(2),d=n(12),p=(n(104),n(270)),g=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={},n.handleAuthClick=n.handleAuthClick.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleAuthClick",value:function(e){var t=this;console.log("handle auth click"),window.gapi.auth2.getAuthInstance().signIn().then(function(e,n){window.gapi.auth2.getAuthInstance().isSignedIn.get()&&t.props.authDone()})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col align-self-center"},o.a.createElement("div",{className:"buttons"},o.a.createElement(p.a,{id:"button",onClick:function(){return e.handleAuthClick(e)}},"Authorise")))))}}]),t}(a.Component),m=n(96),b=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={multiple:!1},n.getOptions=n.getOptions.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getOptions",value:function(){console.log("get opts");for(var e=[],t=0;t<this.props.options.length;t++)this.props.options[t][0]&&e.push(this.props.options[t][this.props.columnIndex]);return console.log(e),e}},{key:"render",value:function(){var e=(!1).multiple;return o.a.createElement(m.Typeahead,{labelKey:"name",multiple:e,options:this.getOptions(),placeholder:"Look up by name"})}}]),t}(a.Component),v=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={input:"",failedLogin:!1,options:[]},n.handleKeyDown=n.handleKeyDown.bind(Object(h.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(h.a)(n)),n.fetchGoogleSheets=n.fetchGoogleSheets.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.fetchGoogleSheets(this)}},{key:"handleChange",value:function(e){this.setState({input:e.target.value})}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&this.handleSubmit(this)}},{key:"handleSubmit",value:function(){console.log(this.state.options)}},{key:"fetchGoogleSheets",value:function(e){console.log("In fetch google sheets"),console.log(e.props.spreadsheetUrl),console.log(e.props.googleSheetTable),e.props.spreadsheetUrl&&e.props.googleSheetTable&&window.gapi.client.sheets.spreadsheets.values.get({spreadsheetId:e.props.spreadsheetUrl,range:e.props.googleSheetTable}).then(function(t){e.setState({options:t.result.values}),console.log(e.state.options)})}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-2"},"Search:"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement(b,{options:this.state.options,columnIndex:this.props.columnIndex}," "))))}}]),t}(a.Component),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(r.a)(this,Object(u.a)(t).call(this,e))).state={selectedEmail:null,employees:[],status:"auth",spreadsheetUrl:"",googleSheetTable:"",columnIndex:null},n.authDone=n.authDone.bind(Object(h.a)(n)),n.initClient=n.initClient.bind(Object(h.a)(n)),n.loadGapiAndAfterwardsInitAuth=n.loadGapiAndAfterwardsInitAuth.bind(Object(h.a)(n)),n.getJotFormParams=n.getJotFormParams.bind(Object(h.a)(n)),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadGapiAndAfterwardsInitAuth",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/api.js",t.async=!0,t.defer=!0,t.onload=function(){e.initClient(e)},document.head.appendChild(t)}},{key:"componentDidMount",value:function(){var e=this;this.loadGapiAndAfterwardsInitAuth(),window.JFCustomWidget.subscribe("ready",function(){e.getJotFormParams(e)})}},{key:"getJotFormParams",value:function(e){var t=window.JFCustomWidget.getWidgetSetting("googleSheetId"),n=window.JFCustomWidget.getWidgetSetting("googleSheetTableName"),a=window.JFCustomWidget.getWidgetSetting("columnIndex");e.setState({spreadsheetUrl:t,googleSheetTable:n,columnIndex:a})}},{key:"authDone",value:function(){this.setState({status:"search"}),console.log("auth done!!")}},{key:"initClient",value:function(e){var t=["https://sheets.googleapis.com/$discovery/rest?version=v4"];window.gapi.load("client",function(){window.gapi.client.init({apiKey:"AIzaSyDjHBwz8TITrxzmbOhLgx0m0MW1RyXkAPw",clientId:"359652543273-isuh9t7hco6p8f1pav3kau3misrim8tv.apps.googleusercontent.com",discoveryDocs:t,scope:"https://www.googleapis.com/auth/spreadsheets.readonly"}).then(function(t){var n=window.gapi.auth2.getAuthInstance().isSignedIn.get();e.setState({status:n?"search":"auth"}),console.log(n)}).catch(function(e){console.log(e)})})}},{key:"render",value:function(){var e;return"auth"===this.state.status?e=o.a.createElement(g,{authDone:this.authDone}," "):"search"===this.state.status&&(e=o.a.createElement(v,{spreadsheetUrl:this.state.spreadsheetUrl,googleSheetTable:this.state.googleSheetTable,columnIndex:this.state.columnIndex})),o.a.createElement("div",{className:"App"},e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(267),n(268);i.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,n){e.exports=n(269)}},[[98,1,2]]]);
//# sourceMappingURL=main.46a0e4f8.chunk.js.map